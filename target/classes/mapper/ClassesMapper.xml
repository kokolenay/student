<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cqu.student.mapper.ClassesMapper">

    <!-- 查询课程，根据时间、地点、授课老师进行动态过滤，但即使条件为空也返回全部记录 -->
    <select id="findClasses" parameterType="java.lang.String">
        SELECT * FROM classes
        WHERE (#{time} IS NULL OR time = #{time})
        AND (#{place} IS NULL OR place = #{place})
        AND (#{classTeacher} IS NULL OR class_teacher = #{classTeacher})
        AND (#{department} IS NULL OR department = #{department})
        AND (#{className} IS NULL OR class_name = #{className})
        AND (#{type} IS NULL OR type = #{type})
    </select>

    <!--选课成功添加数据-->
    <select id="getClassesById" parameterType="Classes">
        SELECT * FROM classes WHERE class_id = #{classId};
    </select>

    <update id="updateChosen">
        UPDATE classes
        SET chosen = chosen + 1
        WHERE class_id = #{classId};
    </update>

</mapper>